<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>FenicsSolver: Multiphysics FEM solver based on Fenics</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FenicsSolver
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Multi-physics FEM solver based on FEM</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Multiphysics FEM solver based on Fenics </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>by Qingfeng Xia, 2017~</p>
<p>This is derived from my personal independent research, although I am not yet financially independent in the University of Oxford. This solver has features beyond commercial commercial solvers, in its capability to solve multibody, multiphysics, multiscale and reduced-order nonlinear problems. This software project is an essential part of my research ambition in <em>Measurement and modelling at extreme conditions</em> and <em>Automated and intelligient engineering design</em>.</p>
<div class="image">
<img src="https://forum.freecadweb.org/download/file.php?id=73587"  alt="Schematic of automated engineering design pipeline"/>
</div>
<h2>License</h2>
<p>LGPL licensed as [FreeCAD]<a href="https://github.com/FreeCAD/FreeCAD">https://github.com/FreeCAD/FreeCAD</a> and [fenics-project]<a href="https://fenicsproject.org/">https://fenicsproject.org/</a></p>
<h2>Screenshot</h2>
<div class="image">
<img src="FenicsSolver_FreeCAD.png?raw=true"  alt="FenicsSolver as a FEM solver in CfdWorkbench of FreeCAD" title="FenicsSolver as a CFD solver in CfdWorkbench of FreeCAD"/>
</div>
<h2>Description</h2>
<p>A set of multi-physics FEM solvers based on Fenics with GUI support(via integration Fenics into FreeCAD FemWorkbench and CfdWorkbench), focusing on multi-body, reduced-order nonlinear problem and mutlti-solver coupling.It functions like COMSOL or Moose, but it is free and it is made of Python.</p>
<ul>
<li>Solvers implemented:<ul>
<li>ScalarTransport (heat transfer, mass transfer, electric potential, etc)</li>
<li>Navier Stokes incompressible laminar flow,</li>
<li>linear elasticity, nonlinear (hyperelastic) elasticity, large deformation, plasticity</li>
</ul>
</li>
<li>Solvers under development:<ul>
<li>scalar transport using DG</li>
<li>viscoelastic</li>
<li>Navier Stokes compressible laminar flow</li>
<li>Maxwell electromagnetics</li>
<li>drift-diffusion (plasma and semiconductor)</li>
<li>wave propagation</li>
</ul>
</li>
<li>coupling of above solvers<ul>
<li>flow-structure interaction (coded but not yet tested)</li>
<li>thermal, chemical, electrical, structure process (yet completed)</li>
</ul>
</li>
<li>Coupling to external solvers:<ul>
<li>turbulent flow and multiphase flow will be implemented by coupled to external CFD solver, OpenFOAM.</li>
<li>see the sister project OpenFOAM preprocessor within FreeCAD Cfd workbench <a href="https://github.com/qingfengxia/Cfd">https://github.com/qingfengxia/Cfd</a></li>
</ul>
</li>
</ul>
<h2>Installation</h2>
<p>It is python2 and python3 compatible, just as fenics itself. For Fenics version 2017.2 on ubuntu, Python3 is recommended, since there is some binary string/unicode problem in Python 2. Fenics 2017.2 also remove VTK plotting, and most of plotting in <a class="el" href="namespace_fenics_solver.html">FenicsSolver</a> examples are ignored.</p>
<p>general installation guide on Linux: <a href="https://fenicsproject.org/docs/dolfin/dev/python/installation.html">https://fenicsproject.org/docs/dolfin/dev/python/installation.html</a> link to install lastest Fenics via PPA on ubuntu: <a href="https://launchpad.net/~fenics-packages/+archive/ubuntu/fenics">https://launchpad.net/~fenics-packages/+archive/ubuntu/fenics</a> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo add-apt-repository ppa:fenics-packages/fenics</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;sudo apt-get update</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;sudo apt-get install fenics python-dolfin</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;#Fenics 2018.1 has only python3</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;#sudo apt-get install fenics python3-dolfin</div></div><!-- fragment --><p>copy this folder to any place on the python search path (PYTHON_PATH), assuming fenics has been installed.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;git clone https://github.com/qingfengxia/FenicsSolver.git</div></div><!-- fragment --><p>installation via PIP will be implemented later once API is stable, but an early preview v0.1 could be privided </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#make sure you have install Fenics, then install by pip(python) or pip3(python3)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;sudo pip install FenicsSolver  # not working</div></div><!-- fragment --><p>to install the latest version for python3 directly form github, this will not install test files </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;pip3 install git+https://github.com/qingfengxia/FenicsSolver.git#FenicsSolver</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;# Ubuntu16.04 pip3 seems too old to install matplotlib.</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;# fenics 2019.1 can be installed from pip</div></div><!-- fragment --><h2>Testing</h2>
<p>This package is under heavy refactoring, considered alpha.</p>
<p>This package is python 2 and python 3 compatibe. Fenics version 2017.1 tested is on Ubuntu16.04 and python 2.7 with/without FreeCAD 0.17 dev. Fenics version 2017.2 tested is on Ubuntu16.04 and Python 3, without FreeCAD GUI. Fenics version 2019.1 tested is on Ubuntu18.04 and Python 3, with FreeCAD 0.19 dev.</p>
<p>Run the python script files with "test_" suffix, which are gtest compatible.</p>
<h2>How to contribute</h2>
<p>There are lots of places to be improve:</p><ul>
<li>Code review, esp. json solver setup input data structure, naming, It should be well-design and stable</li>
<li>testing on different Linux platform</li>
</ul>
<p>new features:</p><ul>
<li>limits for variable</li>
<li>a general higher order temporal integral</li>
<li>DG scalar transportation, currently, the DG solver does not work with 3D geometry.</li>
<li>Maxwell equation</li>
</ul>
<h2>Roadmap and progress</h2>
<p>see also my presentation at Fenics 18: <a href="doc/Fenics18_Xia.pdf">Automated Mechanical Engineering Design using Open Source CAE Software Packages</a></p>
<h3>1. Initial demonstration (Sep 2017)</h3>
<p>A series of object oriented solvers: <em>ScalerEquationSolver</em>, <em>CoupledNavierStokesSolver</em> and <em>LinearElasticitySolver</em>, derived from <em>BaseSolver</em>, while a few other are under active development.</p>
<p>Case setup: json file format is the text case setup file, mapping directly to and from python dict data structure.</p>
<h3>2. FreeCAD GUI integration (Nov 2017)</h3>
<p>2D and 3D xml mesh and case setup writing has been implemented within <a href="https://github.com/qingfengxia/Cfd">CfdWorkbench</a>, this feature has yet been push to FreeCAD master.</p>
<p>Meanwhile, FreeCAD developer <em>joha2</em> has added mesh export function in FemWorkbench, once the boundary mesh can be exported, case setup for fenics solver will be write in FreeCAD workbench.</p>
<h3>3. Coupling of multiple solvers (implemented in 2018, not yet fully tested)</h3>
<p>Fluid-structure interaction coupling has a initial implementation in segregate coupling mode, see engine seal FSI simulation: </p><div class="image">
<img src="doc/fsi_velmag.mp4"  alt="2D FSI simulation of labyrinth seal"/>
</div>
<p>Tight coupling of all physical fields is under design, target on thermal modelling of complicated systems like bearing, motor, etc.</p>
<h3>4. Coupling with external solvers OpenFOAM (some work has been done, but yet completed, scheduled to 2019)</h3>
<p>VTK is the data exchange format for one-way coupling from OpenFOAM to <a class="el" href="namespace_fenics_solver.html">FenicsSolver</a>, from Foam to VTK and VTK to Foam (mesh and internal field data files) Two-way coupling should be implemented with the multiphysics coupling library <a href="https://github.com/precice/precice">preCICE</a></p>
<p>a video/presentation of my <em>13th OpenFOAM Workshop</em> presentation can be found here: <a href="https://www.iesensor.com/blog/2018/06/25/coupling-openfoam-with-fenics-for-multiphysis-simulation-openfoam-workshop-13-presentation/">Coupling OpenFOAM with FeniCS for multiphysis simulation</a></p>
<h3>5. Update code to be compatible with Fenics 2019.1 on Python3 (2019)</h3>
<h3>6. Coupling with electomagnetic, structural and thermal simulation (2019)</h3>
<h4>thermal-elastic-plastic coupling</h4>
<h4>pip packaging and instllation guide</h4>
<h4>Travis CI integration</h4>
<h2>To cite this code</h2>
<p>My journal papers using this code</p><ol type="1">
<li>[Quasi-static modelling for high speed metal cutting](), paper submitted, source code has been uploaded to <a href="https://github.com/qingfengxia/quasi_static_metal_cutting">https://github.com/qingfengxia/quasi_static_metal_cutting</a></li>
<li><a href="http://proceedings.asmedigitalcollection.asme.org/proceeding.aspx?articleid=2701103">Quasi-static thermal modelling of multi-scale sliding contact for unlubricated brush seal materials</a>, now accepted to "ASME Journal of Gas Turbine and Power"</li>
</ol>
<h2>Acknowledgement</h2>
<p>Thanks for my family members' (esp, Mrs J Wang) understanding and support, so I can work at home. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
